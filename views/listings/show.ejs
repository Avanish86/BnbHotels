
<% layout("/layouts/boilerplate") -%>

    <div class="row offset-2">
        <div class="col-10">

        
        <h3 class="mt-3 mb-3">Listing Details</h3>

        <div class="card listing-card" style="width: 30rem; ">
             <img src="<%=show.image%>" class="card-img-top" alt="image">
            <div class="card-body">
                <p class="card-text mt-3 mb-3">
                    <b><%= show.title %></b>    <br>
                    <%= show.description %>    <br>
                    &#8377;<%= show.price.toLocaleString("en-IN") %>   <br>
                    <%= show.location %>   <br>
                    <%= show.country %>
                </p>
            </div>

            
            <div class=" col-2 mt-3 mb-3">
                
                    <a href="/listing/<%= show._id%>/edit" class="btn btn-danger">Edit</a>
                
            </div>

            <div class="col-3 mt-3">
                <form action="/listing/<%= show._id %>?_method=Delete" method="post"> 
                <button class="btn btn-dark">Delete</button>
                </form>
            </div>
        
        </div>

        <hr>
        <div class="  mt-3 mb-3">
            <h5>Leave a review</h5>
            <form action="/listing/<%= show._id%>/reviews" method="post" novalidate class="needs-validation">
                <div>
                    <label for="rating" class="form-label">Rating:</label>
                    <input type="range" class="form-range" id="rating" min="1" max="5" name="review[rating]" value="3">
                </div>
                <div>
                    <label for="comment" class="form-label">Comment</label>
                    <textarea class="form-control" id="comment"  rows="3" name="review[comment]" required></textarea>
                    <div class="invalid-feedback">Please write a comment.</div>
                </div>
                <button class="btn btn-outline-dark mt-3" >Submit</button>
            </form>
        </div>

        <hr>
        <p>All reviews</p>
        <div class="row mb-3">
            <% for(review of show.reviews){%>
                <div class="card mb-2 ms-2 col-5 ">
                    <div class="card-body">
                        <h6 class="card-title ms-1">Joi Doe</h6>
                        <p class="card-text ms-1"><%=review.comment%></p>
                        <p class="card-text ms-1">&#9733; Rating: <%=review.rating%></p>
                        <form action="/listing/<%= show._id%>/reviews/<%=review._id%>?_method=Delete" method="post" class="mb-1">
                            <button class="btn btn-dark btn-sm">Delete</button>
                        </form>
                    </div>
                </div>
    
           <% } %>
        </div>

    </div>
</div>  

   

   

